(function(){"use strict";function t(t){return $.ajax({url:"https://show-g.mediav.com/s?type=1&of=4&newf=2&scheme=https",data:{showids:t+"",uid:e.api.mv_uid,mid:e.api.GetMID()},dataType:"jsonp",jsonp:"jsonp",timeout:3e4})}function n(e){var t=e&&e.adspaces||{},n;for(var r in t){n=t[r];break}var i=n&&n.ads,s=i&&i[0];return s&&(s.impurl=e.impurl),s}function i(){if($(".mv-couplet-container").length===0)return;$.when(t("IIPFJS"),t("aiUadl")).done(function(t,i){var o=n(t[0]),u=n(i[0]);if(!o||!u)return;$(".mv-couplet.left .mv-cont").html(r(o)),$(".mv-couplet.right .mv-cont").html(r(u)),$(".mv-couplet-container").show(),f(o),f(u),e.Stat.send(["867.3905.gif","867.4677.gif"]),s()})}function s(){e.Stat.send(["867.3905.gif","867.4677.gif"]),$(".mv-couplet-container").on("click",".mv-close",function(t){$(".mv-couplet-container").remove(),e.Stat.send("867.7327.gif")}).on("click",".mv-cont",function(t){$(this).parent().hasClass("left")?e.Stat.send("867.9833.gif"):e.Stat.send("867.6305.gif")})}function o(){if($(".mv-right-bottom-corner").length===0)return;t("rSsgBR").done(function(t){var i=n(t);if(!i)return;$(".mv-right-bottom-corner .mv-cont").html(r(i)),$(".mv-right-bottom-corner").show(),f(i),e.Stat.send("867.8393.gif"),u()})}function u(){var t=$(".mv-right-bottom-corner");t.on("click",".mv-close",function(n){t.remove(),e.cookie.set("mv-right-bottom-corner-closed","1",new Date((new Date).format("yyyy/MM/dd 23:59:59"))),e.Stat.send("867.7919.gif")}).on("click",".mv-cont a",function(t){l(this,t),e.Stat.send("867.6668.gif")})}function a(){t("zbnoMv").done(function(t){var i=n(t);i&&($(".mv-couplet-container .mv-cont").html(""),$(".mv-couplet-container .mv-cont").html(r(i)),$(".mv-couplet-container .left .mv-close").css("left",0));var s=$(".mv-couplet-container");s.show();var o=s.find("a").length;o!=0&&(f(i),s.on("click",".mv-close",function(t){$(this).remove(),e.Stat.send("")}).on("click",".mv-cont a",function(t){l(this,t),e.Stat.send("")}))})}function f(t){e.Stat.setLog(t.imptk.join(",")),e.Stat.setLog(t.impurl+t.imparg)}function l(t,n){n.stopPropagation();var r=$(t),i=e.getOffset(r.get(0),n.clientX,n.clientY);e.Stat.setLog(c(r.data("clktk"),i)),r.attr("href",c(r.data("href"),i))}function c(e,t){return e=e.replace("__EVENT_TIME_START__",window._timestamp_mousedown),e=e.replace("__EVENT_TIME_END__",window._timestamp_mouseup),e=e.replace("__OFFSET_X__",t.x),e=e.replace("__OFFSET_Y__",t.y),e=e.replace("__CPX__",t.x),e=e.replace("__CPY__",t.y),e}function h(){$(document).on("mousedown",function(){window._timestamp_mousedown=Date.now()}).on("mouseup",function(){window._timestamp_mouseup=Date.now()}),$(".mv-couplet-container").length>0&&s(),e.cookie.get("mv-right-bottom-corner-closed")!="1"&&o();var t=$(".mv-top-banner");t.length>0&&(e.Stat.send("867.7355.gif"),t.on("click",function(e){}))}var e={};e.api={GetSID:function(){if(e.api.sid)return e.api.sid;try{return e.api.sid=external.GetSID(window),e.api.sid}catch(t){return""}},GetMID:function(){return e.api.mid?e.api.mid:(e.api.mid=e.api.GetSID()&&external.GetMID(e.api.sid),e.api.mid===""&&e.cookie.get("util-api-mid")===""?e.api.mid=$.md5(e.api.mv_uid):e.api.mid===""&&(e.api.mid=e.cookie.get("util-api-mid")),e.cookie.set("util-api-mid",e.api.mid,new Date((new Date).Format("yyyy/MM/dd 23:59:59"))),e.api.mid)},GetMID2:function(t){if(e.api.mid2){t&&t(e.api.mid2);return}external.AppCmd(e.api.GetSID(),"","GetMID2","","",function(n,r){e.api.mid2=r,t&&t(e.api.mid2)})},GetVersion:function(){return e.api.ver?e.api.ver:(e.api.ver=e.api.GetSID()&&external.GetVersion(e.api.sid),e.api.ver)},MakeUID:function(e,t){var n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r=[],i;t=t||n.length;if(e)for(i=0;i<e;i++)r[i]=n[0|Math.random()*t];else{var s;r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(i=0;i<36;i++)r[i]||(s=0|Math.random()*16,r[i]=n[i==19?s&3|8:s])}return r.join("")},mv_uid:function(){function e(e){var t=1,n=0,r;if(e){t=0;for(r=e.length-1;r>=0;r--)n=e.charCodeAt(r),t=(t<<6&268435455)+n+(n<<14),n=t&266338304,t=n!=0?t^n>>21:t}return t}return(""+e(window.location.href)+e(document.domain)+(new Date-0)+Math.floor(Math.random()*1e3)).substr(0,32)}()},Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)(new RegExp("("+n+")")).test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},e.Stat={init:function(){},send:function(t,n){var r=[];if(Object.prototype.toString.call(t)=="[object String]")r.push(t);else{if(Object.prototype.toString.call(t)!="[object Array]")return;r=t}for(var i=0;i<r.length;i++){var s=r[i],o="";if(n&&typeof n=="object")for(var u in n)o+=u+"="+n[u]+"&";(new Image).src="https://dd.browser.360.cn/static/a/"+s+"?"+o+"mid="+e.api.GetMID()+"&"+Date.now()+Math.random().toString().replace("0.","").substr(0,10)}},setLog:function(e){if(!e)return;var t=e.split(","),n=Math.random().toString().replace("0.","").substr(0,10);for(var r=0;r<t.length;r++)(new Image).src=t[r]}},e.cookie={get:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=$.trim(n[r]);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""},set:function(e,t,n){var r="expires="+n.toGMTString();document.cookie=e+"="+t+"; "+r}},e.getOffset=function(e,t,n){var r=e.getBoundingClientRect(),i=parseInt(t-r.left),s=parseInt(n-r.top),o={x:i,y:s};return o};var r=function(e){return'<a data-href="'+e.curl+'" data-clktk="'+e.clktk.join(",")+'" target="_blank"><img src="'+e.img+'"></a><i></i>'};h(),a()})();